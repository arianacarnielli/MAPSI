<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">
	<title>MAPSI Cours/Semaine 6 TME 6</title>
	<link href="MAPSI%20Cours_Semaine%206%20TME%206_fichiers/base.css" rel="stylesheet" type="text/css">
	<script type="text/javascript">g_DefaultStyle="fixed blue";</script>
	<script type="text/javascript" src="MAPSI%20Cours_Semaine%206%20TME%206_fichiers/app.js"></script>
<!--[if IE]>
<link href="http://mapsi.lip6.fr/pub/skins/skittlish/base_ie.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--HTMLHeader--><style type="text/css"><!--
.subpage h1, h1.subpage { margin:0px; margin-top:1.2em; margin-bottom:8px; 
    color: #006633;
	font-size: 150%; }
p.subpage { float: right; }
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }
#siteheader .sitetitle a{height:0px; background: url(http://example.com/mylogo.gif) left top no-repeat} #siteheader .sitetitle a, #siteheader .sitetag{padding-left: 0px} #siteheader .sitetag{margin-top: 44px}
  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for python
 * CSS class: , CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.python .de1, .python .de2 {font-family: monospace; font-weight: normal;}
.python  {font-family:monospace;}
.python .imp {font-weight: bold; color: red;}
.python li, .python .li1 {font-family: monospace; color: black; font-weight: normal;}
.python .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.python .li2 {font-weight: bold;}
.python .kw1 {color: #ff7700;font-weight:bold;}
.python .kw2 {color: #008000;}
.python .kw3 {color: #dc143c;}
.python .kw4 {color: #0000cd;}
.python .co1 {color: #808080; font-style: italic;}
.python .coMULTI {color: #808080; font-style: italic;}
.python .es0 {color: #000099; font-weight: bold;}
.python .br0 {color: black;}
.python .sy0 {color: #66cc66;}
.python .st0 {color: #483d8b;}
.python .nu0 {color: #ff4500;}
.python .me1 {color: black;}
.python .ln-xtra, .python li.ln-xtra, .python div.ln-xtra {background-color: #ffc;}
.python span.xtra { display:block; }

.sourceblocklink {
  text-align: right;
  font-size: smaller;
}
.sourceblocktext {
  padding: 0.5em;
  border: 1px solid #808080;
  color: #000000;
  background-color: #fafafa;
}
.sourceblocktext div {
  font-family: monospace;
  font-size: small;
  line-height: 1;
  height: 1%;
}
.sourceblocktext div.head,
.sourceblocktext div.foot {
  font: italic medium serif;
  padding: 0.5em;
}

--></style><script type="text/javascript" src="MAPSI%20Cours_Semaine%206%20TME%206_fichiers/MathJax.js">MathJax.Hub.Config({
    extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: { inlineMath: [ ['{\$','\$}'] ], displayMath: [ ['{\$\$','\$\$}'] ] } });</script><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style>  <meta name="robots" content="index,follow">

<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?rev=2.4-beta-2') format('woff'), url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?rev=2.4-beta-2') format('opentype')}
@font-face {font-family: MathJax_Main; src: url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?rev=2.4-beta-2') format('woff'), url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?rev=2.4-beta-2') format('opentype'); font-weight: bold}
@font-face {font-family: MathJax_Main; src: url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?rev=2.4-beta-2') format('woff'), url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?rev=2.4-beta-2') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Math; src: url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?rev=2.4-beta-2') format('woff'), url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?rev=2.4-beta-2') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Caligraphic; src: url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?rev=2.4-beta-2') format('woff'), url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?rev=2.4-beta-2') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?rev=2.4-beta-2') format('woff'), url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?rev=2.4-beta-2') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?rev=2.4-beta-2') format('woff'), url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?rev=2.4-beta-2') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?rev=2.4-beta-2') format('woff'), url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?rev=2.4-beta-2') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?rev=2.4-beta-2') format('woff'), url('http://mapsi.lip6.fr/pub/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?rev=2.4-beta-2') format('opentype')}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style></head>

<body class="fixed violet"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px none; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<script type="text/javascript">
//<![CDATA[
	loadPreferences()
//]]>
</script>

	<div id="wrapper">
		<div id="header" class="clearfix">
			<div id="siteheader" class="clearfix">
				<!--PageHeaderFmt-->
				<h1 class="sitetitle"><a class="urllink" href="http://mapsi.lip6.fr/pmwiki.php" rel="nofollow">MAPSI</a></h1>
<div class="sitetag">Modèles et Algorithmes de Probabilités et Statistiques pour l'Informatique
</div>

				<!--/PageHeaderFmt-->
			</div>

			<!--PageTabsFmt-->
			<div id="menu">
				
			</div>
			<!--/PageTabsFmt-->
		</div>

		<div id="contentwrapper" class="clearfix">
			<div id="content">
				<div id="innerwrapper">
					<!--PageTitleGroupFmt-->
					<a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours" class="pagegroup">Cours</a>
					<!--/PageTitleGroupFmt-->
					<!--PageTitleFmt--><!--/PageTitleFmt-->

					<!--PageText-->
<div id="wikitext">
<div class="vspace"></div><h2 style="background-color: #e6d8c0;">Partie obligatoire</h2>
<div class="vspace"></div><h1>TME: Chaine de Markov: classification de lettres manuscrites</h1>
<h2><span style="color: blue;"> Téléchargement des données</span></h2>
<p>Nous travaillerons sur des lettres manuscrites:
</p>
<p class="vspace"><a class="urllink" href="http://mapsi.lip6.fr/uploads/Cours/TME6_lettres.pkl" rel="nofollow"> TME6_lettres.pkl</a>
</p>
<div class="vspace"></div><h2><span style="color: blue;"> Classification de lettres manuscrites</span></h2>
<h3><span style="color: purple;"> Format des données</span></h3>
<p>Les données sont fournies au format pickle (le standard de sérialisation python, particulièrement convivial). Pour les charger:
</p>
<div class="vspace"></div>
<div class="sourceblock " id="sourceblock1">
  <div class="sourceblocktext"><div class="python"><span class="kw1">import</span> numpy <span class="kw1">as</span> np<br>
<span class="kw1">import</span> <span class="kw3">pickle</span> <span class="kw1">as</span> pkl<br>
<span class="kw1">import</span> matplotlib.<span class="me1">pyplot</span> <span class="kw1">as</span> plt<br>
<br>
<span class="co1"># old version = python 2</span><br>
<span class="co1"># data = pkl.load(file("ressources/lettres.pkl","rb"))</span><br>
<span class="co1"># new : </span><br>
<span class="kw1">with</span> <span class="kw2">open</span><span class="br0">(</span><span class="st0">'ressources/lettres.pkl'</span><span class="sy0">,</span> <span class="st0">'rb'</span><span class="br0">)</span> <span class="kw1">as</span> f:<br>
&nbsp; &nbsp; data <span class="sy0">=</span> pkl.<span class="me1">load</span><span class="br0">(</span>f<span class="sy0">,</span> encoding<span class="sy0">=</span><span class="st0">'latin1'</span><span class="br0">)</span> <br>
X <span class="sy0">=</span> np.<span class="kw3">array</span><span class="br0">(</span>data.<span class="me1">get</span><span class="br0">(</span><span class="st0">'letters'</span><span class="br0">)</span><span class="br0">)</span> <span class="co1"># récupération des données sur les lettres</span><br>
Y <span class="sy0">=</span> np.<span class="kw3">array</span><span class="br0">(</span>data.<span class="me1">get</span><span class="br0">(</span><span class="st0">'labels'</span><span class="br0">)</span><span class="br0">)</span> <span class="co1"># récupération des étiquettes associées </span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=1" type="text/plain">[$[Get Code]]</a></div>
</div>

<p class="vspace">Les données sont dans un format original: une lettre est en fait une série d'angles (exprimés en degrés). Un exemple:
</p><pre> X[0] = array([  36.214493,  347.719116,  322.088898,  312.230957,  314.851013,
        315.487213,  313.556702,  326.534973,  141.288971,  167.606689,
        199.321594,  217.911087,  226.443298,  235.002472,  252.354492,
        270.045654,  291.665161,  350.934723,   17.892815,   20.281025,
         28.207161,   43.883423,   53.459026])
</pre><p class="vspace">Lors de l'acquisition, un stylo intelligent a 
pris des mesures régulièrement dans le temps: chaque période correspond à
 un segment de droite et le stylo a calculé l'angle entre deux segments 
consécutifs... C'est l'information qui vous est fournie.
</p>
<p class="vspace">Pour afficher une lettre, il faut reconstruire la trajectoire enregistrée... C'est ce que fait la méthode ci-dessous:
</p>
<div class="sourceblock " id="sourceblock2">
  <div class="sourceblocktext"><div class="python"><span class="co1"># affichage d'une lettre</span><br>
<span class="kw1">def</span> tracerLettre<span class="br0">(</span>let<span class="br0">)</span>:<br>
&nbsp; &nbsp; a <span class="sy0">=</span> -let*np.<span class="me1">pi</span>/<span class="nu0">180</span><span class="sy0">;</span> <span class="co1"># conversion en rad</span><br>
&nbsp; &nbsp; coord <span class="sy0">=</span> np.<span class="kw3">array</span><span class="br0">(</span><span class="br0">[</span><span class="br0">[</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">]</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1"># point initial</span><br>
&nbsp; &nbsp; <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="kw2">len</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span>:<br>
&nbsp; &nbsp; &nbsp; &nbsp; x <span class="sy0">=</span> np.<span class="kw3">array</span><span class="br0">(</span><span class="br0">[</span><span class="br0">[</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">]</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; rot <span class="sy0">=</span> np.<span class="kw3">array</span><span class="br0">(</span><span class="br0">[</span><span class="br0">[</span>np.<span class="me1">cos</span><span class="br0">(</span>a<span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span><span class="sy0">,</span> -np.<span class="me1">sin</span><span class="br0">(</span>a<span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span><span class="br0">]</span><span class="sy0">,</span><span class="br0">[</span> np.<span class="me1">sin</span><span class="br0">(</span>a<span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span><span class="sy0">,</span>np.<span class="me1">cos</span><span class="br0">(</span>a<span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span><span class="br0">]</span><span class="br0">]</span><span class="br0">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; xr <span class="sy0">=</span> x.<span class="me1">dot</span><span class="br0">(</span>rot<span class="br0">)</span> <span class="co1"># application de la rotation</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; coord <span class="sy0">=</span> np.<span class="me1">vstack</span><span class="br0">(</span><span class="br0">(</span>coord<span class="sy0">,</span>xr+coord<span class="br0">[</span>-<span class="nu0">1</span><span class="sy0">,</span>:<span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><br>
&nbsp; &nbsp; plt.<span class="me1">figure</span><span class="br0">(</span><span class="br0">)</span><br>
&nbsp; &nbsp; plt.<span class="me1">plot</span><span class="br0">(</span>coord<span class="br0">[</span>:<span class="sy0">,</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span>coord<span class="br0">[</span>:<span class="sy0">,</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><br>
&nbsp; &nbsp; plt.<span class="me1">savefig</span><span class="br0">(</span><span class="st0">"exlettre.png"</span><span class="br0">)</span><br>
&nbsp; &nbsp; <span class="kw1">return</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=2" type="text/plain">[$[Get Code]]</a></div>
</div>

<div class="vspace"></div><div style="text-align: center;"> <img src="MAPSI%20Cours_Semaine%206%20TME%206_fichiers/exLettre.png" alt="" title="" width="400p"></div>
<div class="vspace"></div><h3><span style="color: purple;"> Apprentissage d'un modèle CM (max de vraisemblance)</span></h3>
<h4>1. Discrétisation</h4>
<p><strong>1 état = 1 angle</strong>
</p>
<p class="vspace">Il est nécessaire de regrouper les angles en un nombre fini d'états (par exemple 20)
</p><ul><li>définir un <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-1-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-1" style="width: 13.648em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.817em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.909em, 1000em, 3.272em, -0.523em); top: -2.84em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-8" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-10" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-11" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-13" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-14" style="font-family: MathJax_Main; padding-left: 0.278em;">360</span><span class="mtext" id="MathJax-Span-15" style="font-family: MathJax_Main;">&nbsp;</span><span class="mo" id="MathJax-Span-16" style="font-family: MathJax_Main;">.</span><span class="texatom" id="MathJax-Span-17" style="padding-left: 0.167em;"><span class="mrow" id="MathJax-Span-18"><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main;">/</span></span></span><span class="mtext" id="MathJax-Span-20" style="font-family: MathJax_Main;">&nbsp;</span><span class="msubsup" id="MathJax-Span-21"><span style="display: inline-block; position: relative; width: 2.25em; height: 0px;"><span style="position: absolute; clip: rect(2.036em, 1000em, 2.851em, -0.523em); top: -2.659em; left: 0em;"><span class="mi" id="MathJax-Span-22" style="font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span><span style="position: absolute; top: -2.328em; left: 0.604em;"><span class="texatom" id="MathJax-Span-23"><span class="mrow" id="MathJax-Span-24"><span class="mi" id="MathJax-Span-25" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-26" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-27" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-28" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-29" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">s</span></span></span><span style="display: inline-block; width: 0px; height: 2.478em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.84em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.412em; vertical-align: -0.391em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">intervalle = 360\ ./\ n_{etats}</script>
</li><li>discrétiser tous les signaux <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-2-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-30" style="width: 0.704em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.544em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(2.036em, 1000em, 2.851em, -0.509em); top: -2.659em; left: 0em;"><span class="mrow" id="MathJax-Span-31"><span class="mi" id="MathJax-Span-32" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.723em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">x</script> à l'aide de la formule
</li></ul><pre> np.floor(x/intervalle)
</pre><p class="vspace">Donner le code de la méthode <code>discretise(X,d)</code> qui prend la base des signaux et retourne une base de signaux discrétisés.
</p>
<p class="vspace"><span style="color: red;"> <strong>VALIDATION</strong> code du premier signal avec une discrétisation sur 3 états:</span>
</p><pre> array([ 0.,  2.,  2.,  2.,  2.,  2.,  2.,  2.,  1.,  1.,  1.,  1.,  1.,
        1.,  2.,  2.,  2.,  2.,  0.,  0.,  0.,  0.,  0.])
</pre><div class="vspace"></div><h4>2. Regrouper les indices des signaux par classe (pour faciliter l'apprentissage)</h4>

<div class="sourceblock " id="sourceblock3">
  <div class="sourceblocktext"><div class="python"><span class="kw1">def</span> groupByLabel<span class="br0">(</span> y<span class="br0">)</span>:<br>
&nbsp; &nbsp; index <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><br>
&nbsp; &nbsp; <span class="kw1">for</span> i <span class="kw1">in</span> np.<span class="me1">unique</span><span class="br0">(</span>y<span class="br0">)</span>: <span class="co1"># pour toutes les classes</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; ind<span class="sy0">,</span> <span class="sy0">=</span> np.<span class="me1">where</span><span class="br0">(</span>y<span class="sy0">==</span>i<span class="br0">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; index.<span class="me1">append</span><span class="br0">(</span>ind<span class="br0">)</span><br>
&nbsp; &nbsp; <span class="kw1">return</span> index</div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=3" type="text/plain">[$[Get Code]]</a></div>
</div>

<p class="vspace">Cette méthode produit simplement une structure type:
</p><pre> [array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10]),
 array([11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21]),
 array([22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32]),
 array([33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43]),
 array([44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54]),
 array([55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65]),
 ...
</pre><p>Chaque ligne regroupe les indices de signaux correspondant à une classe
</p>
<div class="vspace"></div><h4>3. Apprendre les modèles CM</h4>
<p>Soit <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-3-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-33" style="width: 1.846em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.45em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.372em, 1000em, 2.587em, -0.518em); top: -2.236em; left: 0em;"><span class="mrow" id="MathJax-Span-34"><span class="msubsup" id="MathJax-Span-35"><span style="display: inline-block; position: relative; width: 1.441em; height: 0px;"><span style="position: absolute; clip: rect(1.795em, 1000em, 2.84em, -0.518em); top: -2.659em; left: 0em;"><span class="mi" id="MathJax-Span-36" style="font-family: MathJax_Math; font-style: italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.024em;"></span></span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span><span style="position: absolute; top: -2.324em; left: 0.822em;"><span class="mi" id="MathJax-Span-37" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span style="display: inline-block; width: 0px; height: 2.478em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.236em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.227em; vertical-align: -0.29em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">X_C</script> la base de signaux discrétisés correspondant à une classe <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-4-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-38" style="width: 1.009em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.786em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.773em, 1000em, 2.862em, -0.494em); top: -2.659em; left: 0em;"><span class="mrow" id="MathJax-Span-39"><span class="mi" id="MathJax-Span-40" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.068em; vertical-align: -0.104em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">C</script> et <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-5-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-41" style="width: 0.704em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.544em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.784em, 1000em, 2.85em, -0.511em); top: -2.659em; left: 0em;"><span class="mrow" id="MathJax-Span-42"><span class="mi" id="MathJax-Span-43" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.039em; vertical-align: -0.089em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">d</script> le nombre d'états.
Donner le code de la méthode <code>def learnMarkovModel(Xc, d)</code> qui retourne un tuple contenant Pi et A.
</p>
<p class="vspace">Rappel:
</p><ul><li>Initialisation de 
</li></ul>
<div class="sourceblock " id="sourceblock4">
  <div class="sourceblocktext"><div class="python">&nbsp;A <span class="sy0">=</span> np.<span class="me1">zeros</span><span class="br0">(</span><span class="br0">(</span>d<span class="sy0">,</span>d<span class="br0">)</span><span class="br0">)</span><br>
&nbsp;Pi <span class="sy0">=</span> np.<span class="me1">zeros</span><span class="br0">(</span>d<span class="br0">)</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=4" type="text/plain">[$[Get Code]]</a></div>
</div>

<ul><li>Parcours de tous les signaux et incréments de A et Pi
</li><li>Normalisation (un peu réfléchie pour éviter les divisions par 0)
</li></ul>
<div class="sourceblock " id="sourceblock5">
  <div class="sourceblocktext"><div class="python">A <span class="sy0">=</span> A/np.<span class="me1">maximum</span><span class="br0">(</span>A.<span class="kw2">sum</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>.<span class="me1">reshape</span><span class="br0">(</span>d<span class="sy0">,</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">1</span><span class="br0">)</span> <span class="co1"># normalisation</span><br>
Pi <span class="sy0">=</span> Pi/Pi.<span class="kw2">sum</span><span class="br0">(</span><span class="br0">)</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=5" type="text/plain">[$[Get Code]]</a></div>
</div>

<p class="vspace"><strong>Note</strong> : la solution proposée pour 
gérer le cas des lignes entièrement à 0 est naïve et n'est pas 
totalement satisfaisante. Comprendre pourquoi. On proposera une solution
 améliorée plus loin dans le TME.
</p>
<p class="vspace"><span style="color: red;"> <strong>VALIDATION</strong> premier modèle avec une discrétisation sur 3 états:</span>
</p><pre> (array([ 0.36363636,  0.        ,  0.63636364]),
 array([[ 0.84444444,  0.06666667,  0.08888889],
       [ 0.        ,  0.83333333,  0.16666667],
       [ 0.11382114,  0.06504065,  0.82113821]]))
</pre><div class="vspace"></div><h4>4. Stocker les modèles dans une liste </h4>
<p>Pour un usage ultérieur plus facile, on utilise le code suivant:
</p>
<div class="sourceblock " id="sourceblock6">
  <div class="sourceblocktext"><div class="python">d<span class="sy0">=</span><span class="nu0">20</span> &nbsp; &nbsp; <span class="co1"># paramètre de discrétisation</span><br>
Xd <span class="sy0">=</span> discretise<span class="br0">(</span>X<span class="sy0">,</span>d<span class="br0">)</span> &nbsp;<span class="co1"># application de la discrétisation</span><br>
index <span class="sy0">=</span> groupByLabel<span class="br0">(</span>Y<span class="br0">)</span> &nbsp;<span class="co1"># groupement des signaux par classe</span><br>
models <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><br>
<span class="kw1">for</span> cl <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="kw2">len</span><span class="br0">(</span>np.<span class="me1">unique</span><span class="br0">(</span>Y<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>: <span class="co1"># parcours de toutes les classes et optimisation des modèles</span><br>
&nbsp; &nbsp; models.<span class="me1">append</span><span class="br0">(</span>learnMarkovModel<span class="br0">(</span>Xd<span class="br0">[</span>index<span class="br0">[</span>cl<span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span> d<span class="br0">)</span><span class="br0">)</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=6" type="text/plain">[$[Get Code]]</a></div>
</div>

<div class="vspace"></div><h3><span style="color: purple;"> Test (affectation dans les classes sur critère MV)</span></h3>
<h4>1. (log)Probabilité d'une séquence dans un modèle</h4>
<p>Donner le code de la méthode <code>probaSequence(s,Pi,A)</code> qui retourne la log-probabilité d'une séquence s dans le modèle <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-6-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-44" style="width: 6.567em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.197em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.909em, 1000em, 3.272em, -0.497em); top: -2.84em; left: 0em;"><span class="mrow" id="MathJax-Span-45"><span class="mi" id="MathJax-Span-46" style="font-family: MathJax_Math; font-style: italic;">&#955;</span><span class="mo" id="MathJax-Span-47" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mo" id="MathJax-Span-48" style="font-family: MathJax_Main; padding-left: 0.278em;">{</span><span class="mi" id="MathJax-Span-49" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-51" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-52" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">A</span><span class="mo" id="MathJax-Span-53" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.84em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.412em; vertical-align: -0.391em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">\lambda=\{Pi,A\}</script>
</p>
<p class="vspace"><span style="color: red;"> <strong>VALIDATION</strong> probabilité du premier signal dans les 26 modèles avec une discrétisation sur 3 états:</span>
</p>
<div class="vspace"></div><pre>  array([-13.491086  ,         -inf,         -inf,         -inf,
               -inf,         -inf,         -inf,         -inf,
               -inf,         -inf,         -inf,         -inf,
               -inf,         -inf,         -inf,         -inf,
               -inf,         -inf,         -inf,         -inf,
               -inf,         -inf,         -inf,         -inf,
               -inf, -12.48285678])
</pre><div class="vspace"></div><ul><li>Ce signal est-il bien classé?
</li><li>D'où viennent tous les <code>-inf</code>?
</li></ul><div class="vspace"></div><h4>2. Application de la méthode précédente pour tous les signaux et tous les modèles de lettres</h4>
<p>L'application se fait en une ligne de code si vous avez respecté les spécifications précédentes:
</p>
<div class="sourceblock " id="sourceblock7">
  <div class="sourceblocktext"><div class="python">proba <span class="sy0">=</span> np.<span class="kw3">array</span><span class="br0">(</span><span class="br0">[</span><span class="br0">[</span>probaSeq<span class="br0">(</span>Xd<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">,</span> models<span class="br0">[</span>cl<span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span> models<span class="br0">[</span>cl<span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span> <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="kw2">len</span><span class="br0">(</span>Xd<span class="br0">)</span><span class="br0">)</span><span class="br0">]</span><span class="kw1">for</span> cl <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="kw2">len</span><span class="br0">(</span>np.<span class="me1">unique</span><span class="br0">(</span>Y<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">]</span><span class="br0">)</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=7" type="text/plain">[$[Get Code]]</a></div>
</div>

<div class="vspace"></div><h4>3. Evaluation des performances</h4>
<p>Pour l'évaluation, nous proposons l'approche suivante:
</p><ul><li>calcul d'une version numérique des Y
</li></ul>
<div class="sourceblock " id="sourceblock8">
  <div class="sourceblocktext"><div class="python">Ynum <span class="sy0">=</span> np.<span class="me1">zeros</span><span class="br0">(</span>Y.<span class="me1">shape</span><span class="br0">)</span><br>
<span class="kw1">for</span> num<span class="sy0">,</span>char <span class="kw1">in</span> <span class="kw2">enumerate</span><span class="br0">(</span>np.<span class="me1">unique</span><span class="br0">(</span>Y<span class="br0">)</span><span class="br0">)</span>:<br>
&nbsp; &nbsp; Ynum<span class="br0">[</span>Y<span class="sy0">==</span>char<span class="br0">]</span> <span class="sy0">=</span> num</div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=8" type="text/plain">[$[Get Code]]</a></div>
</div>

<ul><li>Calcul de la classe la plus probable:
</li></ul>
<div class="sourceblock " id="sourceblock9">
  <div class="sourceblocktext"><div class="python">pred <span class="sy0">=</span> proba.<span class="me1">argmax</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span> <span class="co1"># max colonne par colonne</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=9" type="text/plain">[$[Get Code]]</a></div>
</div>

<ul><li>Calcul d'un pourcentage de bonne classification
</li></ul>
<div class="sourceblock " id="sourceblock10">
  <div class="sourceblocktext"><div class="python"><span class="kw1">print</span> np.<span class="me1">where</span><span class="br0">(</span>pred <span class="sy0">!=</span> Ynum<span class="sy0">,</span> <span class="nu0">0</span>.<span class="sy0">,</span><span class="nu0">1</span>.<span class="br0">)</span>.<span class="me1">mean</span><span class="br0">(</span><span class="br0">)</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=10" type="text/plain">[$[Get Code]]</a></div>
</div>

<p class="vspace"><span style="color: red;"> <strong>INDICE DE PERFORMANCE</strong> : 91% de bonne classification avec 20 états, 69% avec 3 états</span>
</p>
<div class="vspace"></div><h2><span style="color: blue;"> Biais d'évaluation, notion de sur-apprentissage</span></h2>
<p>Dans le protocole précédent, nous avons triché:
</p><ul><li>les données servent d'abord à apprendre les modèles...
</li><li>puis nous nous servons des mêmes données pour tester les modèles! Les performances sont forcément bonnes!
</li></ul><p class="vspace">Afin de palier le problème, nous allons 
diviser en deux la base de données: une partie servira à l'apprentissage
 des modèles, l'autre à leur évaluation. Pour effectuer la division, 
nous fournissons le code suivant:
</p>
<div class="sourceblock " id="sourceblock11">
  <div class="sourceblocktext"><div class="python"><span class="co1"># separation app/test, pc=ratio de points en apprentissage</span><br>
<span class="kw1">def</span> separeTrainTest<span class="br0">(</span>y<span class="sy0">,</span> pc<span class="br0">)</span>:<br>
&nbsp; &nbsp; indTrain <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><br>
&nbsp; &nbsp; indTest <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><br>
&nbsp; &nbsp; <span class="kw1">for</span> i <span class="kw1">in</span> np.<span class="me1">unique</span><span class="br0">(</span>y<span class="br0">)</span>: <span class="co1"># pour toutes les classes</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; ind<span class="sy0">,</span> <span class="sy0">=</span> np.<span class="me1">where</span><span class="br0">(</span>y<span class="sy0">==</span>i<span class="br0">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; n <span class="sy0">=</span> <span class="kw2">len</span><span class="br0">(</span>ind<span class="br0">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; indTrain.<span class="me1">append</span><span class="br0">(</span>ind<span class="br0">[</span>np.<span class="kw3">random</span>.<span class="me1">permutation</span><span class="br0">(</span>n<span class="br0">)</span><span class="br0">]</span><span class="br0">[</span>:<span class="kw2">int</span><span class="br0">(</span>np.<span class="me1">floor</span><span class="br0">(</span>pc*n<span class="br0">)</span><span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; indTest.<span class="me1">append</span><span class="br0">(</span>np.<span class="me1">setdiff1d</span><span class="br0">(</span>ind<span class="sy0">,</span> indTrain<span class="br0">[</span>-<span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><br>
&nbsp; &nbsp; <span class="kw1">return</span> indTrain<span class="sy0">,</span> indTest<br>
<span class="co1"># exemple d'utilisation</span><br>
itrain<span class="sy0">,</span>itest <span class="sy0">=</span> separeTrainTest<span class="br0">(</span>Y<span class="sy0">,</span><span class="nu0">0.8</span><span class="br0">)</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=11" type="text/plain">[$[Get Code]]</a></div>
</div>

<p class="vspace">dans <code>itrain</code>, nous obtenons les indices des signaux qui doivent servir en apprentissage pour chaque classe:
</p><pre> itrain = [array([ 6,  1,  2,  9, 10,  0,  4,  3]), # 80% des signaux de 
 array([16, 19, 20, 12, 21, 11, 15, 18]), # la classe 0 (='a') + permutation aléatoire
 array([27, 25, 28, 26, 31, 29, 32, 23]), 
 array([42, 38, 34, 36, 41, 35, 33, 40]),
 array([44, 48, 53, 50, 46, 45, 54, 49]),
 array([63, 55, 58, 64, 56, 65, 60, 62]),
 array([66, 74, 76, 67, 71, 73, 68, 72]),
</pre><p class="vspace">Note: pour faciliter l'évaluation des modèles, 
vous aurez besoin de re-fusionner tous les indices d'apprentissage et de
 test. Cela se fait avec les lignes de code suivantes:
</p>
<div class="sourceblock " id="sourceblock12">
  <div class="sourceblocktext"><div class="python">ia <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><br>
<span class="kw1">for</span> i <span class="kw1">in</span> itrain:<br>
&nbsp; &nbsp; ia +<span class="sy0">=</span> i.<span class="me1">tolist</span><span class="br0">(</span><span class="br0">)</span> &nbsp; &nbsp;<br>
it <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span><br>
<span class="kw1">for</span> i <span class="kw1">in</span> itest:<br>
&nbsp; &nbsp; it +<span class="sy0">=</span> i.<span class="me1">tolist</span><span class="br0">(</span><span class="br0">)</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=12" type="text/plain">[$[Get Code]]</a></div>
</div>

<p class="vspace">Note 2: Du fait de la permutation aléatoire, les résultats vont bouger (un peu) à chaque execution du programme.
</p>
<div class="vspace"></div><h3><span style="color: purple;"> Questions importantes</span></h3>
<ul><li>Ré-utiliser les fonctions précédemment définies pour apprendre des modèles et les évaluer sans biais.
</li><li>Calculer et analyser les résultats obtenus en apprentissage et en test
</li><li>Etudier l'évolution des performances en fonction de la discrétisation
</li></ul><div class="vspace"></div><h3><span style="color: purple;"> Lutter contre le sur-apprentissage</span></h3>
<p>Cette base de données met en lumière le phénomène de 
sur-apprentissage: il y a peu de données et dès que le nombre d'états 
augmente, il y a trop peu d'exemple pour estimer correctement les 
matrices <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-7-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-54" style="width: 2.227em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.752em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.943em, 1000em, 3.216em, -0.509em); top: -2.84em; left: 0em;"><span class="mrow" id="MathJax-Span-55"><span class="mi" id="MathJax-Span-56" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-57" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-58" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">&#960;<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.84em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.299em; vertical-align: -0.321em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-7">A, \pi</script>.
 De nombreuses cases sont donc à 0, voire des lignes entières (d'où la 
sécurisation du code pour la normalisation des matrices stochastiques).
</p>
<p class="vspace">Ces 0 sont particulièrement discriminants: considérant la classe <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-8-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-59" style="width: 0.552em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.423em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(2.036em, 1000em, 2.851em, -0.51em); top: -2.659em; left: 0em;"><span class="mrow" id="MathJax-Span-60"><span class="mi" id="MathJax-Span-61" style="font-family: MathJax_Math; font-style: italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.723em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-8">c</script>,
 ils permettent d'éliminer de  cette classe tout signal présentant cette
 caractéristique. Cette règle est trop forte compte tenu de la taille de
 la base d'apprentissage. Nous proposons une astuce pour palier cette 
faiblesse:
<strong>lors du comptage, initialiser les matrices <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-9-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-62" style="width: 2.303em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.799em; height: 0px; font-size: 127%;"><span style="position: absolute; clip: rect(1.922em, 1000em, 3.192em, -0.505em); top: -2.818em; left: 0em;"><span class="mrow" id="MathJax-Span-63"><span class="mi" id="MathJax-Span-64" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-65" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-66" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">&#960;<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.818em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.308em; vertical-align: -0.323em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-9">A, \pi</script> avec <em>ones</em> au lieu de <em>zeros</em> </strong>.
On fait semblant d'avoir observer une transition de chaque type avant même le début du comptage.
</p>
<p class="vspace">Comparer les performances en test.
</p>
<div class="vspace"></div><h2 style="background-color: #e6d8c0;">Partie optionnelle</h2>
<h3><span style="color: purple;"> Evaluation qualitative</span></h3>
<p>Nous nous demandons maintenant où se trouvent les erreurs que nous avons commises...
</p>
<p class="vspace">Calcul de la matrice de confusion: pour chaque 
échantillon de test, nous avons une prédiction (issue du modèle) et une 
vérité terrain (la vraie étiquette). En posant Nc le nombre de classes, 
la matrice de confusion est une matrice (Nc x Nc) où nous comptons le 
nombre d'échantillon de test dans chaque catégorie:
</p>
<div class="vspace"></div><ul><li>Initialisation à 0:
</li></ul>
<div class="sourceblock " id="sourceblock13">
  <div class="sourceblocktext"><div class="python">conf <span class="sy0">=</span> np.<span class="me1">zeros</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">26</span><span class="sy0">,</span><span class="nu0">26</span><span class="br0">)</span><span class="br0">)</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=13" type="text/plain">[$[Get Code]]</a></div>
</div>

<ul><li>Pour chaque échantillon, incrément de la case (prediction,vérité)
</li><li>Tracé de la matrice:
</li></ul>
<div class="sourceblock " id="sourceblock14">
  <div class="sourceblocktext"><div class="python">plt.<span class="me1">figure</span><span class="br0">(</span><span class="br0">)</span><br>
plt.<span class="me1">imshow</span><span class="br0">(</span>conf<span class="sy0">,</span> interpolation<span class="sy0">=</span><span class="st0">'nearest'</span><span class="br0">)</span><br>
plt.<span class="me1">colorbar</span><span class="br0">(</span><span class="br0">)</span><br>
plt.<span class="me1">xticks</span><span class="br0">(</span>np.<span class="me1">arange</span><span class="br0">(</span><span class="nu0">26</span><span class="br0">)</span><span class="sy0">,</span>np.<span class="me1">unique</span><span class="br0">(</span>Y<span class="br0">)</span><span class="br0">)</span><br>
plt.<span class="me1">yticks</span><span class="br0">(</span>np.<span class="me1">arange</span><span class="br0">(</span><span class="nu0">26</span><span class="br0">)</span><span class="sy0">,</span>np.<span class="me1">unique</span><span class="br0">(</span>Y<span class="br0">)</span><span class="br0">)</span><br>
plt.<span class="me1">xlabel</span><span class="br0">(</span>u<span class="st0">'Vérité terrain'</span><span class="br0">)</span><br>
plt.<span class="me1">ylabel</span><span class="br0">(</span>u<span class="st0">'Prédiction'</span><span class="br0">)</span><br>
plt.<span class="me1">savefig</span><span class="br0">(</span><span class="st0">"mat_conf_lettres.png"</span><span class="br0">)</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=14" type="text/plain">[$[Get Code]]</a></div>
</div>

<div class="vspace"></div><div style="text-align: center;"><img src="MAPSI%20Cours_Semaine%206%20TME%206_fichiers/mat_confusion_lettres.png" alt="" title="" width="400px"></div>
<p class="vspace">Dans l'exemple ci-dessus, nous voyons par exemple que:
</p><ul><li>tous les exemples de 'b' sont bien reconnus
</li><li>tous les exemples de 'a' sont mal classés (un dans 'z', deux dans 'd')
</li></ul><div class="vspace"></div><h2><span style="color: blue;"> Modèle génératif</span></h2>
<p>Utiliser les modèles appris pour générer de nouvelles lettres manuscrites.
</p>
<div class="vspace"></div><h4>Tirage selon une loi de probabilité discrète</h4>
<ul><li>faire la somme cumulée de la loi <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-10-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-67" style="width: 1.161em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.906em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(2.036em, 1000em, 2.851em, -0.491em); top: -2.659em; left: 0em;"><span class="mrow" id="MathJax-Span-68"><span class="mi" id="MathJax-Span-69" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-70" style="font-family: MathJax_Math; font-style: italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.723em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-10">sc</script>
</li><li>tirer un nombre aléatoire <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-11-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-71" style="width: 0.476em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.363em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.852em, 1000em, 2.851em, -0.525em); top: -2.659em; left: 0em;"><span class="mrow" id="MathJax-Span-72"><span class="mi" id="MathJax-Span-73" style="font-family: MathJax_Math; font-style: italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.955em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-11">t</script> entre 0 et 1
</li><li>trouver la première valeur de <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-12-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-74" style="width: 1.161em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.906em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(2.036em, 1000em, 2.851em, -0.491em); top: -2.659em; left: 0em;"><span class="mrow" id="MathJax-Span-75"><span class="mi" id="MathJax-Span-76" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-77" style="font-family: MathJax_Math; font-style: italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.723em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-12">sc</script> qui est supérieure à <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-13-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-78" style="width: 0.476em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.363em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.852em, 1000em, 2.851em, -0.525em); top: -2.659em; left: 0em;"><span class="mrow" id="MathJax-Span-79"><span class="mi" id="MathJax-Span-80" style="font-family: MathJax_Math; font-style: italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.955em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-13">t</script>
</li><li>retourner cet état
</li></ul><p class="vspace">Note: comme vu en cours, tout repose sur la somme cumulée (notée ici <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-14-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-81" style="width: 1.161em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.906em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(2.036em, 1000em, 2.851em, -0.491em); top: -2.659em; left: 0em;"><span class="mrow" id="MathJax-Span-82"><span class="mi" id="MathJax-Span-83" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-84" style="font-family: MathJax_Math; font-style: italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.723em; vertical-align: -0.09em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-14">sc</script>), calculable en appelant <code>np.cumsum</code>.
Sur un exemple: la loi <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-15-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-85" style="width: 12.43em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.85em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.909em, 1000em, 3.272em, -0.492em); top: -2.84em; left: 0em;"><span class="mrow" id="MathJax-Span-86"><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Math; font-style: italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span><span class="mo" id="MathJax-Span-88" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mo" id="MathJax-Span-89" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mn" id="MathJax-Span-90" style="font-family: MathJax_Main;">0.2</span><span class="mo" id="MathJax-Span-91" style="font-family: MathJax_Main;">,</span><span class="mtext" id="MathJax-Span-92" style="font-family: MathJax_Main; padding-left: 0.167em;">&nbsp;</span><span class="mn" id="MathJax-Span-93" style="font-family: MathJax_Main;">0.4</span><span class="mo" id="MathJax-Span-94" style="font-family: MathJax_Main;">,</span><span class="mtext" id="MathJax-Span-95" style="font-family: MathJax_Main; padding-left: 0.167em;">&nbsp;</span><span class="mn" id="MathJax-Span-96" style="font-family: MathJax_Main;">0.3</span><span class="mo" id="MathJax-Span-97" style="font-family: MathJax_Main;">,</span><span class="mtext" id="MathJax-Span-98" style="font-family: MathJax_Main; padding-left: 0.167em;">&nbsp;</span><span class="mn" id="MathJax-Span-99" style="font-family: MathJax_Main;">0.1</span><span class="mo" id="MathJax-Span-100" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.84em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.412em; vertical-align: -0.391em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-15">V=[0.2,\ 0.4,\ 0.3,\ 0.1]</script> a pour somme cumulée <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-16-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-101" style="width: 18.75em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.866em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.909em, 1000em, 3.272em, -0.492em); top: -2.84em; left: 0em;"><span class="mrow" id="MathJax-Span-102"><span class="mi" id="MathJax-Span-103" style="font-family: MathJax_Math; font-style: italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.186em;"></span></span><span class="mo" id="MathJax-Span-104" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-105" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">c</span><span class="mi" id="MathJax-Span-106" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-107" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-108" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-109" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-110" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mo" id="MathJax-Span-111" style="font-family: MathJax_Main;">(</span><span class="mo" id="MathJax-Span-112" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-113" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mo" id="MathJax-Span-114" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mn" id="MathJax-Span-115" style="font-family: MathJax_Main;">0.2</span><span class="mo" id="MathJax-Span-116" style="font-family: MathJax_Main;">,</span><span class="mtext" id="MathJax-Span-117" style="font-family: MathJax_Main; padding-left: 0.167em;">&nbsp;</span><span class="mn" id="MathJax-Span-118" style="font-family: MathJax_Main;">0.6</span><span class="mo" id="MathJax-Span-119" style="font-family: MathJax_Main;">,</span><span class="mtext" id="MathJax-Span-120" style="font-family: MathJax_Main; padding-left: 0.167em;">&nbsp;</span><span class="mn" id="MathJax-Span-121" style="font-family: MathJax_Main;">0.9</span><span class="mo" id="MathJax-Span-122" style="font-family: MathJax_Main;">,</span><span class="mtext" id="MathJax-Span-123" style="font-family: MathJax_Main; padding-left: 0.167em;">&nbsp;</span><span class="mn" id="MathJax-Span-124" style="font-family: MathJax_Main;">1.0</span><span class="mo" id="MathJax-Span-125" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.84em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.412em; vertical-align: -0.391em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-16">V.cumsum()=[0.2,\ 0.6,\ 0.9,\ 1.0]</script>
</p>
<div class="vspace"></div><h4>Génération d'une séquence de longueur N</h4>
<ul><li>tirer un état <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-17-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-126" style="width: 1.161em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.906em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.613em, 1000em, 2.583em, -0.491em); top: -2.236em; left: 0em;"><span class="mrow" id="MathJax-Span-127"><span class="msubsup" id="MathJax-Span-128"><span style="display: inline-block; position: relative; width: 0.921em; height: 0px;"><span style="position: absolute; clip: rect(2.036em, 1000em, 2.85em, -0.491em); top: -2.659em; left: 0em;"><span class="mi" id="MathJax-Span-129" style="font-family: MathJax_Math; font-style: italic;">s</span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span><span style="position: absolute; top: -2.328em; left: 0.483em;"><span class="mn" id="MathJax-Span-130" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 2.478em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.236em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.918em; vertical-align: -0.285em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-17">s_0</script> selon Pi
</li><li>tant que la longueur n'est pas atteinte:
<ul><li>tirer un état <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-18-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-131" style="width: 2.151em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.692em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.613em, 1000em, 2.625em, -0.491em); top: -2.236em; left: 0em;"><span class="mrow" id="MathJax-Span-132"><span class="msubsup" id="MathJax-Span-133"><span style="display: inline-block; position: relative; width: 1.707em; height: 0px;"><span style="position: absolute; clip: rect(2.036em, 1000em, 2.85em, -0.491em); top: -2.659em; left: 0em;"><span class="mi" id="MathJax-Span-134" style="font-family: MathJax_Math; font-style: italic;">s</span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span><span style="position: absolute; top: -2.328em; left: 0.483em;"><span class="texatom" id="MathJax-Span-135"><span class="mrow" id="MathJax-Span-136"><span class="mi" id="MathJax-Span-137" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-138" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-139" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 2.478em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.236em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 0.971em; vertical-align: -0.338em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-18">s_{t+1}</script> selon <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-19-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-140" style="width: 2.684em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.115em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.909em, 1000em, 3.272em, -0.509em); top: -2.84em; left: 0em;"><span class="mrow" id="MathJax-Span-141"><span class="mi" id="MathJax-Span-142" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-143" style="font-family: MathJax_Main;">[</span><span class="msubsup" id="MathJax-Span-144"><span style="display: inline-block; position: relative; width: 0.8em; height: 0px;"><span style="position: absolute; clip: rect(2.036em, 1000em, 2.85em, -0.491em); top: -2.659em; left: 0em;"><span class="mi" id="MathJax-Span-145" style="font-family: MathJax_Math; font-style: italic;">s</span><span style="display: inline-block; width: 0px; height: 2.659em;"></span></span><span style="position: absolute; top: -2.328em; left: 0.483em;"><span class="texatom" id="MathJax-Span-146"><span class="mrow" id="MathJax-Span-147"><span class="mi" id="MathJax-Span-148" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 2.478em;"></span></span></span></span><span class="mo" id="MathJax-Span-149" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.84em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.412em; vertical-align: -0.391em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-19">A[s_{t}]</script>
</li></ul></li></ul><div class="vspace"></div><h4>Affichage du résultat</h4>

<div class="sourceblock " id="sourceblock15">
  <div class="sourceblocktext"><div class="python">newa <span class="sy0">=</span> generate<span class="br0">(</span>models<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span>models<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span> <span class="nu0">25</span><span class="br0">)</span> <span class="co1"># generation d'une séquence d'états</span><br>
intervalle <span class="sy0">=</span> <span class="nu0">360</span>./d <span class="co1"># pour passer des états =&gt; valeur d'angles</span><br>
newa_continu <span class="sy0">=</span> np.<span class="kw3">array</span><span class="br0">(</span><span class="br0">[</span>i*intervalle <span class="kw1">for</span> i <span class="kw1">in</span> newa<span class="br0">]</span><span class="br0">)</span> <span class="co1"># conv int =&gt; double</span><br>
tracerLettre<span class="br0">(</span>newa_continu<span class="br0">)</span></div></div>
  <div class="sourceblocklink"><a href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=sourceblock&amp;num=15" type="text/plain">[$[Get Code]]</a></div>
</div>

</div>

				</div>
			</div>

			<div id="sidebar">
				<!--PageSearchFmt-->
				<div class="boxy short">
					<div id="search">
						<h3>Search</h3>

						<form id="searchform" action="http://mapsi.lip6.fr/pmwiki.php" method="get">
						<fieldset>
							<input type="hidden" name="n" value="Cours.Semaine6TME6">
							<input type="hidden" name="action" value="search">
							<input class="searchBox" type="text" id="q" name="q">
							<input class="searchButton" type="submit" value="Go">
						</fieldset>
						</form>
					</div>
				</div>
				<!--/PageSearchFmt-->

				<!--PageRightFmt-->
				<div class="boxy tall">
					<p class="sidehead"> <a class="wikilink" href="http://mapsi.lip6.fr/pmwiki.php?n=Main.TutoPythonJN">Tutoriel numpy</a>
</p>
<div class="vspace"></div>

				</div>
				<!--/PageRightFmt-->
			</div>
		</div>

		<div id="options-container">
			<!--PageOptionsFmt-->
			<div id="options">
				<h2>Options:</h2>
				<ul id="option_size">
					<li title="size: fixed" id="option_size_fixed" class="fixed"><a><span>fixed</span></a></li>
					<li title="size: fluid" id="option_size_fluid" class="fluid"><a><span>fluid</span></a></li>
				</ul>

				<ul id="option_color">
					<li title="color: orange" id="option_color_orange" class="orange"><a><span>orange</span></a></li>
					<li title="color: blue" id="option_color_blue" class="blue"><a><span>blue</span></a></li>
					<li title="color: green" id="option_color_green" class="green"><a><span>green</span></a></li>
					<li title="color: pink" id="option_color_pink" class="pink"><a><span>pink</span></a></li>
					<li title="color: cyan" id="option_color_cyan" class="cyan"><a><span>cyan</span></a></li>
					<li title="color: red" id="option_color_red" class="red"><a><span>red</span></a></li>
					<li title="color: violet" id="option_color_violet" class="violet"><a><span>violet</span></a></li>
				</ul>
			</div>
			<!--/PageOptionsFmt-->

			<!--PageActionFmt-->
			<div class="pageactions">
				<ul><li class="browse">      <a accesskey="" rel="nofollow" class="selflink" href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6">View</a>
</li><li class="edit">      <a accesskey="e" rel="nofollow" class="wikilink" href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=edit">Edit</a>
</li><li class="diff">   <a accesskey="h" rel="nofollow" class="wikilink" href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=diff">History</a>
</li><li class="print">     <a accesskey="" rel="nofollow" class="wikilink" href="http://mapsi.lip6.fr/pmwiki.php?n=Cours.Semaine6TME6?action=print">Print</a>
</li></ul>

			</div>
			<!--/PageActionFmt-->
		</div>

		<div id="footer">
			<!--PageFooterFmt-->
				<div class="footer"><p>Page last modified on November 21, 2017, at 01:07 PM EST
</p>
</div>
			<!--/PageFooterFmt-->
			<p id="credits"><a href="http://evil.che.lu/projects/skittlish">Skittlish</a> theme adapted by <a href="http://solidgone.org/Skins/">David Gilbert</a>, powered by <a href="http://pmwiki.com/">PmWiki</a></p>
		</div>
	</div>
<!--HTMLFooter-->


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px none; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px none; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-size-adjust: none; font-family: MathJax_Main, sans-serif;"></div></div></body></html>